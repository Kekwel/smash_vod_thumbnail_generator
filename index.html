<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Smash Thumbnail Generator</title>

    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/sprites.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css">

    <!-- font NES -->
    <link href="https://fonts.googleapis.com/css?family=Press+Start+2P" rel="stylesheet">
    <!-- latest NES CSS -->
    <link href="https://unpkg.com/nes.css@latest/css/nes.min.css" rel="stylesheet" />
    <!-- icon material -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <!-- Custom NES css -->
    <link rel="stylesheet" href="css/custom_nes.css">

    <script type="text/javascript" src="json/characters.json"></script>
    <script type="text/javascript" src="img/stock/sprites.json"></script>
</head>

<body>
    <!-- Dialogs -->
    <!-- Edit tag J1 -->
    <dialog class="nes-dialog is-dark" id="dialog-tag-j1">
        <form method="dialog">
            <p>Pseudo Joueur 1 : </p>
            <div class="buttons-rotate">
                <button class="nes-btn is-primary icons-only" type="button" id="rotate-left-j1"><i class="material-icons rotate-left">crop_16_9</i></button>
                <button class="nes-btn is-primary icons-only" type="button" id="rotate-center-j1"><i class="material-icons">crop_16_9</i></button>
                <button class="nes-btn is-primary icons-only" type="button" id="rotate-right-j1"><i class="material-icons rotate-right">crop_16_9</i></button>
            </div>
            <input class="nes-input" id="j1" type="text" value="J1" size="10">
            <div class="fontsize-player">
                <label>Taille police (px) : </label>
                <input class="nes-input" id="fontsize-j1" type="text" maxlength="3" value="44" oninput="setTagFont('j1')">
            </div>
            <menu class="dialog-menu">
                <button class="nes-btn is-success center">OK</button>
            </menu>
        </form>
    </dialog>
    <!-- Edit tag J2 -->
    <dialog class="nes-dialog is-dark" id="dialog-tag-j2">
        <form method="dialog">
            <p>Pseudo Joueur 2 : </p>
            <div class="buttons-rotate">
                <button class="nes-btn is-primary icons-only" type="button" id="rotate-left-j2"><i class="material-icons rotate-left">crop_16_9</i></button>
                <button class="nes-btn is-primary icons-only" type="button" id="rotate-center-j2"><i class="material-icons">crop_16_9</i></button>
                <button class="nes-btn is-primary icons-only" type="button" id="rotate-right-j2"><i class="material-icons rotate-right">crop_16_9</i></button>
            </div>
            <input class="nes-input" id="j2" type="text" value="J2">
            <div class="fontsize-player">
                <label>Taille police (px) : </label>
                <input class="nes-input" id="fontsize-j2" type="text" maxlength="3" value="44" oninput="setTagFont('j2')">
            </div>
            <menu class="dialog-menu">
                <button class="nes-btn is-success center">OK</button>
            </menu>
        </form>
    </dialog>
    <!--    Edit perso J1-->
    <dialog class="nes-dialog is-dark" id="dialog-char-j1">
        <p>Couleur fond : <button type="button" class="nes-btn is-warning icons-only" onclick="resetBG('j1')"><i class="nes-icon close is-small"></i> Reset</button></p>
        <div class="panel-color">
            <form id="form_background_color_j1" name="form_background_color_j1">
                <div class="primary-color">
                    <label class="background-j1-1">
                        <input type="radio" class="nes-radio is-dark" name="background_color" value="1" checked />
                        <span>1</span>
                    </label>
                    <label class="background-j1-2">
                        <input type="radio" class="nes-radio is-dark" name="background_color" value="2" />
                        <span>2</span>
                    </label>
                    <label class="background-j1-3">
                        <input type="radio" class="nes-radio is-dark" name="background_color" value="3" />
                        <span>3</span>
                    </label>
                    <label class="background-j1-4">
                        <input type="radio" class="nes-radio is-dark" name="background_color" value="4" />
                        <span>4</span>
                    </label>
                    <label class="background-j1-5">
                        <input type="radio" class="nes-radio is-dark" name="background_color" value="5" />
                        <span>5</span>
                    </label>
                    <label class="background-j1-6">
                        <input type="radio" class="nes-radio is-dark" name="background_color" value="6" />
                        <span>6</span>
                    </label>
                    <label class="background-j1-7">
                        <input type="radio" class="nes-radio is-dark" name="background_color" value="7" />
                        <span>7</span>
                    </label>
                    <label class="background-j1-8">
                        <input type="radio" class="nes-radio is-dark" name="background_color" value="8" />
                        <span>8</span>
                    </label>
                </div>
                <div>
                    <label class="background-j1-0">
                        <input type="radio" class="nes-radio is-dark" name="background_color" value="0" />
                        <span>Fond vert</span>
                    </label>
                    <label class="background-j1-999">
                        <input type="radio" class="nes-radio is-dark" name="background_color" value="999" />
                        <span>Fond noir</span>
                    </label>
                </div>
                <div class="select_logos" id="select_bg_j1">
                    <label for="bg1_file" class="label-upload"><i class="material-icons">attachment</i> Ou choisir une image ...</label>
                    <input id="bg1_file" type="file" onchange="setBackground('j1', 'bg1_file')" accept='image/*'>
                </div>
                <div>
                    <label class="choix-bg">
                        <input type="checkbox" class="nes-checkbox" onchange="toggleBackgroundSize('j1')" />
                        <span>Etendre</span>
                    </label>
                    <label class="choix-bg">
                        <input type="checkbox" class="nes-checkbox" onchange="toggleRepeatBackground('j1')" checked />
                        <span>Répéter</span>
                    </label>
                </div>
            </form>
        </div>
        <form method="dialog">
            <p>Personnage Joueur 1 : </p>
            <div class="center margin-auto">
                <button class="nes-btn is-primary icons-only" type="button" id="reverse-j1"><i class="material-icons">compare_arrows</i> Retourner</button>
            </div>
            <div class="panel-color select-char" id="stocks-j1"></div>
            <span class="center margin-auto nes-text">Costume</span>
            <div class="panel-color select-color" id="color-char-j1"></div>
            <menu class="dialog-menu">
                <button class="nes-btn is-success center">OK</button>
            </menu>
        </form>
    </dialog>
    <!--    Edit perso J2-->
    <dialog class="nes-dialog is-dark" id="dialog-char-j2">
        <p>Couleur fond : <button type="button" class="nes-btn is-warning icons-only" onclick="resetBG('j2')"><i class="nes-icon close is-small"></i> Reset</button></p>
        <div class="panel-color">
            <form id="form_background_color_j1" name="form_background_color_j2">
                <div class="primary-color">
                    <label class="background-j2-1">
                        <input type="radio" class="nes-radio is-dark" name="background_color" value="1" />
                        <span>1</span>
                    </label>
                    <label class="background-j2-2">
                        <input type="radio" class="nes-radio is-dark" name="background_color" value="2" checked />
                        <span>2</span>
                    </label>
                    <label class="background-j2-3">
                        <input type="radio" class="nes-radio is-dark" name="background_color" value="3" />
                        <span>3</span>
                    </label>
                    <label class="background-j2-4">
                        <input type="radio" class="nes-radio is-dark" name="background_color" value="4" />
                        <span>4</span>
                    </label>
                    <label class="background-j2-5">
                        <input type="radio" class="nes-radio is-dark" name="background_color" value="5" />
                        <span>5</span>
                    </label>
                    <label class="background-j2-6">
                        <input type="radio" class="nes-radio is-dark" name="background_color" value="6" />
                        <span>6</span>
                    </label>
                    <label class="background-j2-7">
                        <input type="radio" class="nes-radio is-dark" name="background_color" value="7" />
                        <span>7</span>
                    </label>
                    <label class="background-j2-8">
                        <input type="radio" class="nes-radio is-dark" name="background_color" value="8" />
                        <span>8</span>
                    </label>
                </div>
                <div>
                    <label class="background-j2-0">
                        <input type="radio" class="nes-radio is-dark" name="background_color" value="0" />
                        <span>Fond vert</span>
                    </label>
                    <label class="background-j2-999">
                        <input type="radio" class="nes-radio is-dark" name="background_color" value="999" />
                        <span>Fond noir</span>
                    </label>
                </div>
                <div class="select_logos" id="select_bg_j2">
                    <label for="bg2_file" class="label-upload"><i class="material-icons">attachment</i> Ou choisir une image ...</label>
                    <input id="bg2_file" type="file" onchange="setBackground('j2', 'bg2_file')" accept='image/*'>
                </div>
                <div>
                    <label class="choix-bg">
                        <input type="checkbox" class="nes-checkbox" onchange="toggleBackgroundSize('j2')" />
                        <span>Etendre</span>
                    </label>
                    <label class="choix-bg">
                        <input type="checkbox" class="nes-checkbox" onchange="toggleRepeatBackground('j2')" checked />
                        <span>Répéter</span>
                    </label>
                </div>
            </form>
        </div>
        <form method="dialog">
            <p>Personnage Joueur 2 : </p>
            <div class="center margin-auto">
                <button class="nes-btn is-primary icons-only" type="button" id="reverse-j2"><i class="material-icons">compare_arrows</i> Retourner</button>
            </div>
            <div class="panel-color select-char" id="stocks-j2"></div>
            <span class="center margin-auto nes-text">Costume</span>
            <div class="panel-color select-color" id="color-char-j2">
            </div>
            <menu class="dialog-menu">
                <button class="nes-btn is-success center">OK</button>
            </menu>
        </form>
    </dialog>
    <!--    Edit phases-->
    <dialog class="nes-dialog is-dark" id="dialog-phases">
        <form method="dialog">
            <p>Phase</p>
            <div class="center">
                <button class="nes-btn is-success" type="button" id="phase_visible"><i class="material-icons" style="font-size: 20px;">visibility_off</i>
                    <span>Invisible</span>
                </button>
            </div>
            <hr>
            <div class="buttons-rotate">
                <button class="nes-btn is-primary icons-only" type="button" id="rotate-left-phase"><i class="material-icons rotate-left">crop_16_9</i></button>
                <button class="nes-btn is-primary icons-only" type="button" id="rotate-center-phase"><i class="material-icons">crop_16_9</i></button>
                <button class="nes-btn is-primary icons-only" type="button" id="rotate-right-phase"><i class="material-icons rotate-right">crop_16_9</i></button>
            </div>
            <div class="fontsize-player">
                <label>Taille police (px) : </label>
                <input class="" id="fontsize-phase" type="text" maxlength="3" value="44" oninput="setPhaseFont('phase')">
            </div>
            <div id="type_phase">
                <div id="form_type_phase">
                    <label class="radio"><input id="custom" type="radio" class="nes-radio" name="type_phase" value=""><span>Custom : </span><input id="custom_phase" type="text" name="custome_phase" size="10" /></label><br>
                    <label class="radio"><input id="pool" type="radio" class="nes-radio" name="type_phase" value="Pools"><span>Pools</span></label>
                    <label class="radio">
                        <input id="winner" type="radio" class="nes-radio" name="type_phase" value="Winners" checked><span>Winners</span></label>
                    <label class="radio">
                        <input id="loser" type="radio" class="nes-radio" name="type_phase" value="Losers"><span>Losers</span></label>
                    <label class="radio">
                        <input id="grand" type="radio" class="nes-radio" name="type_phase" value="Grand"><span>Grand</span></label>
                </div>
            </div>
            <hr>
            <div class="buttons-rotate">
                <button class="nes-btn is-primary icons-only" type="button" id="rotate-left-phase2"><i class="material-icons rotate-left">crop_16_9</i></button>
                <button class="nes-btn is-primary icons-only" type="button" id="rotate-center-phase2"><i class="material-icons">crop_16_9</i></button>
                <button class="nes-btn is-primary icons-only" type="button" id="rotate-right-phase2"><i class="material-icons rotate-right">crop_16_9</i></button>
            </div>
            <div class="fontsize-player">
                <label>Taille police (px) : </label>
                <input class="" id="fontsize-phase2" type="text" maxlength="3" value="44" oninput="setPhaseFont('phase2')">
            </div>
            <div id="select_phase" class="center">
                <div id="form_select_phase">
                    <label class="radio"><input id="custom1" type="radio" class="nes-radio" name="phase" value=""><span>Custom : </span><input id="custom_phase2" type="text" name="custome_phase2" size="10" /></label><br>
                    <!--                TODO autoriser que number-->
                    <label class="radio"><input id="round" type="radio" class="nes-radio" name="phase" value="Round" checked><span>Round </span><input id="nb_round" type="text" name="nb_round" maxlength="2" size="1" value="1" /></label>
                    <label class="radio"><input id="quarter" type="radio" class="nes-radio" name="phase" value="Quarters"><span>Quarters</span></label>
                    <label class="radio"><input id="semi" type="radio" class="nes-radio" name="phase" value="Semis"><span>Semis</span></label>
                    <label class="radio"><input id="final" type="radio" class="nes-radio" name="phase" value="Finals"><span>Finals</span></label>
                </div>
            </div>
            <menu class="dialog-menu">
                <button class="nes-btn is-success center">OK</button>
            </menu>
        </form>
    </dialog>
    <!-- TODO nouveau miis -->
    <!-- TODO FR / EN -->
    <div class="center margin-auto"><span id="menu-top" class="center margin-auto nes-text">VoDs Thumbnails Generator for </span>
        <div class="nes-select" style="width: 50%; margin: auto; padding-bottom: 10px">
            <select required id="game_select" name="game">
                <option value="melee">Super Smash Bros. Melee</option>
                <option value="ult" selected>Super Smash Bros. Ultimate</option>
                <option value="" disabled> ----- </option>
                <option value="wiiu" disabled>Super Smash Bros. for Wii U</option>
                <option value="PM" disabled>Project M</option>
                <option value="brawl" disabled>Super Smash Bros. Brawl</option>
                <option value="n64" disabled>Super Smash Bros. 64</option>
            </select>
        </div><a href="https://twitter.com/Kekwel_SSB" target="_blank" rel="noopener" aria-label="twitter"><i class="nes-icon is-medium twitter"></i></a>
    </div>
    <div id="main">
        <div id="thumbnail" style="margin: auto;">
            <section class="section-banner" id="section-j1">
                <div class="banner rotate-tag-left" id="banner-j1"><span class="nes-text" id="name-j1">J1</span></div>
            </section>

            <section class="section-banner" id="section-j2">
                <div class="banner rotate-tag-left" id="banner-j2"><span class="nes-text" id="name-j2">J2</span></div>
            </section>
            <div class="character background-j1-1" id="div-j1">
                <img id="char-j1" class="" src="img/char/ult/donkey_00_0.png">
            </div>
            <div class="character background-j2-2" id="div-j2">
                <img id="char-j2" class="" src="img/char/ult/mario_00_0.png">
            </div>
            <div class="banner rotate-phase-left" id="phase"><span class="nes-text" id="phase-text">Winners</span></div>
            <div class="banner rotate-phase-left" id="phase2"><span class="nes-text" id="phase2-text">Round 1</span></div>
            <div id="dom-wrap-haut">
                <div class="logo" id="logo_haut">
                    <img src="">
                </div>
                <div class="logo" id="logo_bas">
                    <img src="">
                </div>
            </div>
            <div class="banner" id="versus"><span>VS</span></div>
        </div>
    </div>
    <div class="center margin-auto back-color" style="padding: 10px 0; "><button class="nes-btn is-success" type="button" id="download"><i class="material-icons">save_alt</i> Récupérer l'image</button>
    </div>
    <div class="center margin-auto back-color">
        <!--        <label id="fontSize"><input type="number" name="fontSize" min="1" max="100" value="44">px,</label>-->
        <label id="label_font" for="font">Police d'écriture</label>
        <section style="display: inline-block">
            <button type="button" class="nes-btn is-primary icons-only" onclick="document.getElementById('dialog-dark').showModal();">
                <i class="material-icons" id="help_font">help_outline</i>
            </button>
            <dialog class="nes-dialog is-dark" id="dialog-dark">
                <form method="dialog">
                    <!--                    <p class="title">Polices d'écritures</p>-->
                    <p>Retrouvez les polices utilisées ici : </p>
                    <a target="_blank" href="https://fonts.google.com/">Google Fonts</a>
                    <br>
                    <p>Si la votre n'apparaît pas, <br>contactez moi et je pourrais l'ajouter !</p>
                    <menu class="dialog-menu">
                        <button class="nes-btn is-primary">Fermer</button>
                    </menu>
                </form>
            </dialog>
        </section>
        <div class="nes-select" style="width: 50%; margin: auto; padding-bottom: 10px">
            <select required id="font_select" name="font">
                <option value="" disabled selected hidden>...</option>
            </select>
        </div>
    </div>
    <div id="infos" class="back-color">
        <div class="select_logos panel-color" id="select_logo_haut">
            <label for="down_file" class="custom-file-upload">
                <i class="material-icons">attachment</i> Logo (haut)
            </label><br>
            <input id="up_file" type="file" onchange="previewFile('logo_haut', 'up_file')" accept='image/*'><br>
        </div>
        <div class="select_logos panel-color" id="select_logo_bas">
            <label for="down_file" class="custom-file-upload">
                <i class="material-icons">attachment</i> Logo (bas)
            </label><br>
            <input id="down_file" type="file" onchange="previewFile('logo_bas', 'down_file')" accept='image/*'><br>
        </div>
    </div>
    <div class="footer back-color"></div>
</body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

<script src="js/dom-to-image.min.js"></script>
<script src="js/render-char.js"></script>
<script src="js/thumbnail.js"></script>
<script src="js/parse-char.js"></script>

<link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.2/css/select2.min.css" rel="stylesheet" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.2/js/select2.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js"></script>
<script src="js/google-fonts.js"></script>

</html>
